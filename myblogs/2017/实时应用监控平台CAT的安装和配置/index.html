<html>
<head>
	
	<title>实时应用监控平台CAT安装和配置</title>
	<meta name="keywords" content="Acheron,blog,博客,代码,技术,书法,读书" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

        
<link rel="stylesheet" href="/css/bootstrap.min.css">

        
<link rel="stylesheet" href="/css/bootstrap-theme.min.css">



	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        
<script src="/js/util.js"></script>

        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    
    

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
<nav class="navbar navbar-inverse navbar-fixed-top" style="opacity: .9" role="navigation">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">HeroHuang&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav nav-tabs navbar-right">
            
                
                    <li >
                        <a href="/"> 首页</a>
                    </li>
                
                    <li >
                        <a href="/myblogs/read"> 读书</a>
                    </li>
                
                    <li >
                        <a href="/myblogs/shufa"> 书法</a>
                    </li>
                
                    <li >
                        <a href="/myblogs/code"> 代码</a>
                    </li>
                
                    <li >
                        <a href="/myblogs/life"> 生活</a>
                    </li>
                
                    <li >
                        <a href="/myblogs/about"> 我是</a>
                    </li>
                
            
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>


<br/>


<h2 class="title">实时应用监控平台CAT安装和配置</h2>

<div style="text-align:center;margin-top: -10px;">
<div class="article-category" style="text-align:right;">

2017年12月31日




<!--  -->
 </div>

</div>

<!-- <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CAT%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">CAT是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CAT%E6%94%AF%E6%8C%81%E7%9A%84%E7%9B%91%E6%8E%A7%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B"><span class="toc-text">CAT支持的监控消息类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85"><span class="toc-text">开始安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE"><span class="toc-text">修改服务配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9Aclient-xml"><span class="toc-text">1. 修改客户端配置文件：client.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9Adatasources-xml"><span class="toc-text">2. 修改数据库配置文件：datasources.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE-server-xml"><span class="toc-text">3.修改服务端服务配置:server.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BF%AE%E6%94%B9%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-text">4.修改路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE%E5%88%B027%E3%80%8128%E4%B8%A4%E6%9C%BA%E5%99%A8"><span class="toc-text">5. 复制配置到27、28两机器</span></a></li></ol></li></ol> -->
<h2 id="CAT是什么"><a href="#CAT是什么" class="headerlink" title="CAT是什么"></a>CAT是什么</h2><p>CAT是一个Java语言编写的实时监控系统，能够跟各种流行的中间件框架集成（MVC框架、RPC框架、数据库框架、缓存框架等），实现对应用各层级的系统运行状况监控。</p>
<ul>
<li>官网： <a href="https://github.com/dianping/cat">https://github.com/dianping/cat</a></li>
</ul>
<h2 id="CAT支持的监控消息类型"><a href="#CAT支持的监控消息类型" class="headerlink" title="CAT支持的监控消息类型"></a>CAT支持的监控消息类型</h2><ul>
<li>Transaction: 适合记录跨越系统边界的程序访问行为,比如远程调用，数据库调用，也适合执行时间较长的业务逻辑监控，Transaction用来记录一段代码的执行时间和次数。</li>
<li>Event :用来记录一件事发生的次数，比如记录系统异常，它和transaction相比缺少了时间的统计，开销比transaction要小。</li>
<li>Heartbeat: 表示程序内定期产生的统计信息, 如CPU%, MEM%, 连接池状态, 系统负载等。<br>Metric 用于记录业务指标、指标可能包含对一个指标记录次数、记录平均值、记录总和，业务指标最低统计粒度为1分钟。</li>
<li>Trace: 用于记录基本的trace信息，类似于log4j的info信息，这些信息仅用于查看一些相关信息</li>
</ul>
<p>##运行环境</p>
<ul>
<li>Java 6 以上</li>
<li>Web 应用服务器，如：Apache Tomcat、JBoss Application Server、WebSphere Application Server、WebLogic Application Server（可选项，内置Netty应用服务器）</li>
<li>MySQL 数据库</li>
<li>Maven 3 以上（只编译和安装时需要）</li>
</ul>
<h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><p>前提：已安装jdk、git、maven、mysql</p>
<ul>
<li><p>获取源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/dianping/cat.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入cat目录，执行maven构建命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd cat</span><br><span class="line">clean install -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure></li>
</ul>
<p>此处如果编译不成功，不能下载相关jar包，则可以手动下载，包在cat的<code>mvn-repo</code>分支下(<a href="https://github.com/dianping/cat/tree/mvn-repo">https://github.com/dianping/cat/tree/mvn-repo</a>) ,下载后拷贝到本地的maven仓库下</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout mvn-repo</span><br><span class="line">cp -R * ~/.m2/repository</span><br></pre></td></tr></table></figure>

<ul>
<li><p>将构建成功后的war包重命名，并拷贝到tomcat的webapp下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv cat-alpha-1.4.0.war cat.war</span><br><span class="line">cp cat.war tomcat/webapp</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动tomcat，访问如下地址，后台默认登录<code>catadmin/catadmin</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/cat/</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><ul>
<li><p>安装好mysql后，登录mysql，创建表空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database cat；</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行cat源码下的数据库脚本<code>cat/script/Cat.sql</code>，创建相关表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use cat；</span><br><span class="line">source Cat.sql;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="修改服务配置"><a href="#修改服务配置" class="headerlink" title="修改服务配置"></a>修改服务配置</h2><ul>
<li><p>到<code>/data/appdatas/cat/</code>下，如果没有则新建此目录，<strong>确保这个目录有读写权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /data/appdatas/cat/</span><br></pre></td></tr></table></figure>
</li>
<li><p>将cat源码下<code>script</code>目录下的三个配置文件(client.xml、server.xml、datasources.xml)拷贝到上述目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /cat/script/*.xml /data/appdatas/cat/</span><br></pre></td></tr></table></figure></li>
</ul>
<p>*** 修改配置文件之前的几项假设：***</p>
<ul>
<li>cat.war 包部署在10.8.40.26、10.8.40.27、10.8.40.28三台机器上,10.8.40.26为三台机器中的主服务器，TCP端口只能局域网内访问；</li>
<li>数据库采用 MySQL安装在10.8.40.147上；</li>
<li>暂不启用HDFS存储服务；</li>
<li>暂不启用LDAP服务；</li>
</ul>
<h3 id="1-修改客户端配置文件：client-xml"><a href="#1-修改客户端配置文件：client-xml" class="headerlink" title="1. 修改客户端配置文件：client.xml"></a>1. 修改客户端配置文件：client.xml</h3><p>打开&#x2F;data&#x2F;appdatas&#x2F;cat&#x2F;client.xml客户端配置文件，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;config mode=&quot;client&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">xsi:noNamespaceSchemaLocation=&quot;config.xsd&quot;&gt;</span><br><span class="line">    &lt;servers&gt;</span><br><span class="line">        &lt;server ip=&quot;10.8.40.26&quot; port=&quot;2280&quot; http-port=&quot;8080&quot; /&gt;</span><br><span class="line">        &lt;server ip=&quot;10.8.40.27&quot; port=&quot;2280&quot; http-port=&quot;8080&quot; /&gt;</span><br><span class="line">        &lt;server ip=&quot;10.8.40.28&quot; port=&quot;2280&quot; http-port=&quot;8080&quot; /&gt;</span><br><span class="line">    &lt;/servers&gt;</span><br><span class="line">&lt;/config&gt;</span><br></pre></td></tr></table></figure>

<p>配置说明：</p>
<ul>
<li>mode : 定义配置模式，固定值为client;–暂未使用</li>
<li>servers : 定义多个服务端信息;</li>
<li>server : 定义某个服务端信息;</li>
<li>ip : 配置服务端（cat-home）对外IP地址</li>
<li>port : 配置服务端（cat-home）对外TCP协议开启端口，固定值为2280;</li>
<li>http-port : 配置服务端（cat-home）对外HTTP协议开启端口, 如：tomcat默认是8080端口，若未指定，默认为8080</li>
</ul>
<h3 id="2-修改数据库配置文件：datasources-xml"><a href="#2-修改数据库配置文件：datasources-xml" class="headerlink" title="2. 修改数据库配置文件：datasources.xml"></a>2. 修改数据库配置文件：datasources.xml</h3><p>打开&#x2F;data&#x2F;appdatas&#x2F;cat&#x2F;datasources.xml数据库配置文件，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;data-sources&gt;</span><br><span class="line">    &lt;data-source id=&quot;cat&quot;&gt;</span><br><span class="line">        &lt;maximum-pool-size&gt;3&lt;/maximum-pool-size&gt;</span><br><span class="line">        &lt;connection-timeout&gt;1s&lt;/connection-timeout&gt;</span><br><span class="line">        &lt;idle-timeout&gt;10m&lt;/idle-timeout&gt;</span><br><span class="line">        &lt;statement-cache-size&gt;1000&lt;/statement-cache-size&gt;</span><br><span class="line">        &lt;properties&gt;</span><br><span class="line">            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;</span><br><span class="line">            &lt;url&gt;&lt;![CDATA[jdbc:mysql://10.8.40.147:3306/cat]]&gt;&lt;/url&gt;</span><br><span class="line">            &lt;user&gt;root&lt;/user&gt;</span><br><span class="line">            &lt;password&gt;mysql&lt;/password&gt;</span><br><span class="line">            &lt;connectionProperties&gt;</span><br><span class="line">                &lt;![CDATA[useUnicode=true&amp;autoReconnect=true]]&gt;</span><br><span class="line">            &lt;/connectionProperties&gt;</span><br><span class="line">        &lt;/properties&gt;</span><br><span class="line">    &lt;/data-source&gt; </span><br><span class="line">    &lt;data-source id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;maximum-pool-size&gt;3&lt;/maximum-pool-size&gt;</span><br><span class="line">        &lt;connection-timeout&gt;1s&lt;/connection-timeout&gt;</span><br><span class="line">        &lt;idle-timeout&gt;10m&lt;/idle-timeout&gt;</span><br><span class="line">        &lt;statement-cache-size&gt;1000&lt;/statement-cache-size&gt;</span><br><span class="line">        &lt;properties&gt;</span><br><span class="line">            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;</span><br><span class="line">            &lt;url&gt;&lt;![CDATA[jdbc:mysql://10.8.40.147:3306/cat]]&gt;&lt;/url&gt;</span><br><span class="line">            &lt;user&gt;root&lt;/user&gt;</span><br><span class="line">            &lt;password&gt;mysql&lt;/password&gt;</span><br><span class="line">            &lt;connectionProperties&gt;</span><br><span class="line">                &lt;![CDATA[useUnicode=true&amp;autoReconnect=true]]&gt;</span><br><span class="line">            &lt;/connectionProperties&gt;</span><br><span class="line">        &lt;/properties&gt;</span><br><span class="line">    &lt;/data-source&gt;</span><br><span class="line">&lt;/data-sources&gt;</span><br></pre></td></tr></table></figure>

<p>配置说明：</p>
<ul>
<li>主要修改项为：url（数据库连接地址）、user（数据库用户名）、password（数据用户登录密码）</li>
</ul>
<h3 id="3-修改服务端服务配置-server-xml"><a href="#3-修改服务端服务配置-server-xml" class="headerlink" title="3.修改服务端服务配置:server.xml"></a>3.修改服务端服务配置:server.xml</h3><p>　打开&#x2F;data&#x2F;appdatas&#x2F;cat&#x2F;server.xml服务端服务配置文件，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;config local-mode=&quot;false&quot; hdfs-machine=&quot;false&quot; job-machine=&quot;true&quot; alert-machine=&quot;true&quot;&gt;</span><br><span class="line">    &lt;storage local-base-dir=&quot;/data/appdatas/cat/bucket/&quot; max-hdfs-storage-time=&quot;15&quot; local-report-storage-time=&quot;7&quot; local-logivew-storage-time=&quot;7&quot;&gt;</span><br><span class="line">        &lt;hdfs id=&quot;logview&quot; max-size=&quot;128M&quot; server-uri=&quot;hdfs://10.8.40.31/user/cat&quot; base-dir=&quot;logview&quot;/&gt;</span><br><span class="line">        &lt;hdfs id=&quot;dump&quot; max-size=&quot;128M&quot; server-uri=&quot;hdfs://10.8.40.32/user/cat&quot; base-dir=&quot;dump&quot;/&gt;</span><br><span class="line">        &lt;hdfs id=&quot;remote&quot; max-size=&quot;128M&quot; server-uri=&quot;hdfs://10.8.40.33/user/cat&quot; base-dir=&quot;remote&quot;/&gt;</span><br><span class="line">    &lt;/storage&gt;</span><br><span class="line">    &lt;console default-domain=&quot;Cat&quot; show-cat-domain=&quot;true&quot;&gt;</span><br><span class="line">        &lt;remote-servers&gt;10.8.40.26:8080,10.8.40.27:8080,10.8.40.28:8080&lt;/remote-servers&gt;</span><br><span class="line">    &lt;/console&gt;</span><br><span class="line">    &lt;ldap ldapUrl=&quot;ldap://10.8.40.21:389/DC=dianpingoa,DC=com&quot;/&gt;</span><br><span class="line">&lt;/config&gt;</span><br></pre></td></tr></table></figure>

<p>配置说明：</p>
<ul>
<li>local-mode : 定义服务是否为本地模式（开发模式），在生产环境时，设置为false,启动远程监听模式。默认为 false;</li>
<li>hdfs-machine : 定义是否启用HDFS存储方式，默认为 false；</li>
<li>job-machine : 定义当前服务是否为报告工作机（开启生成汇总报告和统计报告的任务，只需要一台服务机开启此功能），默认为 false；</li>
<li>alert-machine : 定义当前服务是否为报警机（开启各类报警监听，只需要一台服务机开启此功能），默认为 false；</li>
<li>storage : 定义数据存储配置信息</li>
<li>local-report-storage-time : 定义本地报告存放时长，单位为（天）</li>
<li>local-logivew-storage-time : 定义本地日志存放时长，单位为（天）</li>
<li>local-base-dir : 定义本地数据存储目录</li>
<li>hdfs : 定义HDFS配置信息，便于直接登录系统</li>
<li>server-uri : 定义HDFS服务地址</li>
<li>console : 定义服务控制台信息</li>
<li>remote-servers : 定义HTTP服务列表，（远程监听端同步更新服务端信息即取此值）</li>
<li>ldap : 定义LDAP配置信息</li>
<li>ldapUrl : 定义LDAP服务地址</li>
</ul>
<h3 id="4-修改路由配置"><a href="#4-修改路由配置" class="headerlink" title="4.修改路由配置"></a>4.修改路由配置</h3><p>登入 cat系统，修改路由配置，打开浏览器，输入<a href="http://10.8.40.26:8080/cat/">http://10.8.40.26:8080/cat/</a></p>
<p>在<code>配置--》全局告警配置--》客户端路由</code>，进入配置路由界面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;router-config backup-server=&quot;127.0.0.1&quot; backup-server-port=&quot;2280&quot;&gt;</span><br><span class="line">   &lt;default-server id=&quot;127.0.0.1&quot; weight=&quot;0.8&quot; port=&quot;2280&quot; enable=&quot;true&quot;/&gt;</span><br><span class="line">   &lt;network-policy id=&quot;default&quot; title=&quot;default&quot; block=&quot;false&quot; server-group=&quot;default_machine&quot;&gt;</span><br><span class="line">   &lt;/network-policy&gt;</span><br><span class="line">   &lt;server-group id=&quot;default_machine&quot; title=&quot;????&quot;&gt;</span><br><span class="line">      &lt;group-server id=&quot;127.0.0.1&quot;/&gt;</span><br><span class="line">   &lt;/server-group&gt;</span><br><span class="line">   &lt;domain id=&quot;cat&quot;&gt;</span><br><span class="line">      &lt;group id=&quot;default&quot;&gt;</span><br><span class="line">         &lt;server id=&quot;127.0.0.1&quot; port=&quot;2280&quot; weight=&quot;1.0&quot;/&gt;</span><br><span class="line">      &lt;/group&gt;</span><br><span class="line">   &lt;/domain&gt;</span><br><span class="line">&lt;/router-config&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>把backup-server设置为当前服务器对外IP地址，端口固定为2280;</li>
</ul>
<ul>
<li>default-server定义可跳转的路由地址，可以设置多个。default-server的id属性配置可路由的cat-home服务IP地址，端口固定为2280;若需要禁用路由地址，可把enable设置为false。</li>
<li>点击“提交”按钮，保存修改的路由配置</li>
</ul>
<h3 id="5-复制配置到27、28两机器"><a href="#5-复制配置到27、28两机器" class="headerlink" title="5. 复制配置到27、28两机器"></a>5. 复制配置到27、28两机器</h3><ul>
<li><p>拷贝 10.8.40.26机器&#x2F;data&#x2F;appdatas&#x2F;cat&#x2F;目录中client.xml、server.xml、datasources.xml三个配置文件到27、28两机器相同目录中</p>
</li>
<li><p>修改server.xml配置中的 job-machine 和 alert-machine属性，都设置为false,禁用生成报告和报警功能，只开启监听功能</p>
</li>
<li><p>启动27、28上的Tomcat,开启cat服务，完成服务端的配置及启动</p>
</li>
<li><p>（<em>若服务端只分配一台服务器，按10.8.40.26完成安装配置即可</em>）</p>
</li>
</ul>
<p><em>这里记录我安装配置的过程，更详细的文档查看<a href="https://github.com/dianping/cat">官网</a></em></p>


<!--<a href="http://ac-heron.github.io/myblogs/2017/%E5%AE%9E%E6%97%B6%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0CAT%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>




<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- <script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script> -->

<script src="/js/bootstrap.min.js"></script>







</body>
</html>